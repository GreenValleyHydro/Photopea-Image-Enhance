// Function to auto enhance image
function autoEnhance() {
  // Use Photopea API methods to apply auto-enhance adjustments
  window.parent.postMessage({type: "action", name: "autoLevels"}, "*");
  window.parent.postMessage({type: "action", name: "autoContrast"}, "*");
}

// Function to sharpen image
function sharpenImage() {
  // Use Photopea API methods to apply sharpen filter
  window.parent.postMessage({
    type: "action",
    name: "sharpenMore"
  }, "*");
}

// Listen for a message from Photopea
window.addEventListener("message", (event) => {
  const data = event.data;

  if (data === "autoEnhance") {
    autoEnhance();
  } else if (data === "sharpenImage") {
    sharpenImage();
  }
});

// Initialize the add-on
(function() {
  // Send a message to Photopea to add the custom tools
  window.parent.postMessage({type: "addMenuItem", name: "Auto Enhance", message: "autoEnhance"}, "*");
  window.parent.postMessage({type: "addMenuItem", name: "Sharpen Image", message: "sharpenImage"}, "*");
})();
